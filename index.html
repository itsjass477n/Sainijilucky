<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Push Notification Demo</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
<h2>Firebase Push Notification Test</h2>
<input type="text" id="notifMsg" placeholder="Enter message to send">
<button onclick="sendNotification()">Send Notification</button>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDsm1U6e-4ZTi0WGBAbj1LUWOA63xpQVD0",
    authDomain: "js-world-64c90.firebaseapp.com",
    databaseURL: "https://js-world-64c90-default-rtdb.firebaseio.com",
    projectId: "js-world-64c90",
    storageBucket: "js-world-64c90.appspot.com",
    messagingSenderId: "240128005952",
    appId: "1:240128005952:web:b7f1a21647514efbe80ca5"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Ask for notification permission
  if (Notification.permission !== "granted") {
    Notification.requestPermission().then(permission => {
      console.log("Notification permission:", permission);
    });
  }

  // Function to send notification to DB
  function sendNotification() {
    const msg = document.getElementById("notifMsg").value.trim();
    if (!msg) return alert("Enter a message!");
    const key = db.ref("notifications").push().key;
    db.ref("notifications/" + key).set({
      message: msg,
      timestamp: Date.now()
    }).then(() => {
      alert("Notification sent!");
      document.getElementById("notifMsg").value = "";
    });
  }

  // Listen for new notifications
  db.ref("notifications").on("child_added", snapshot => {
    const data = snapshot.val();
    if (!data) return;
    if (Notification.permission === "granted") {
      new Notification("New Notification!", { body: data.message });
    }
  });
</script>
</body>
</html>